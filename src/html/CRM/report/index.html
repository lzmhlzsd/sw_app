<!--start:header-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="./../../../css/weui.min.css">
    <link rel="stylesheet" type="text/css" href="./../../../css/jquery-weui.min.css">
    <link rel="stylesheet" type="text/css" href="./../../../css/crm-base.css">
    <link rel="stylesheet" type="text/css" href="./../../../css/fonts/iconfont.css">
    <title>会员数据</title>
</head>

<body>
<!--end:header-->
<link rel="stylesheet" type="text/css" href="./../../../css/fixedTable.css">
    <style>
    </style>
    <div>
        <div class="weui-tab">
            <div class="weui-navbar">
                <a class="weui-navbar__item weui-bar__item--on" href="#tab1">
                    目标管理
                    <div class="weui-navbar__item-line"></div>
                </a>
                <a class="weui-navbar__item" href="#tab2">
                    运营指标
                    <div class="weui-navbar__item-line"></div>
                </a>
                <a class="weui-navbar__item" href="#tab3">
                    自定义报表
                    <div class="weui-navbar__item-line"></div>
                </a>
                <a class="weui-navbar__item" href="#tab4">
                    活动分析
                    <div class="weui-navbar__item-line"></div>
                </a>
            </div>
            <div class="weui-tab__bd">
                <!-- 目标管理 -->
                <div id="tab1" class="weui-tab__bd-item weui-tab__bd-item--active">
                    <div class="flex flex-between flex-align-center pt-5 pr-10 pb-5 pl-10" style="background-color: #f7f7f7;border-bottom: 1px solid #e8e8e8;">
                        <div class="f-14">
                            <span data-key="start_date1">0000-00-00</span>至
                            <span data-key="end_date1">0000-00-00</span>
                        </div>
                        <div class="f-14">
                            <span class="drop-search" data-drop="date">
                                本月
                                <i class="iconfont icon-xiasanjiao txt-n f-14"></i>
                            </span>
                        </div>
                        <div class="f-14">
                            <span class="drop-search" data-drop="store">
                                正佳广场
                                <i class="iconfont icon-xiasanjiao txt-n f-14"></i>
                            </span>
                        </div>
                    </div>
                    <div class="drop-search-content p-15" data-dropcontent="date">
                        <div id="gbt1"></div>
                        <div class="mt-5">
                            <input class="weui-input date-sinput" id="date1" type="text">
                            <span class="f-14 ml-5 mr-5">至</span>
                            <input class="weui-input date-sinput" id="date2" type="text">
                        </div>
                        <div class="mt-10" style="height: 29px;">
                            <a href="javascript:;" id="search_1" class="weui-btn weui-btn_mini weui-btn_primary" style="margin-top: 0;">确定</a>
                            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_default cancle-search" style="margin-top: 0;">取消</a>
                        </div>
                    </div>
                    <div class="drop-search-content p-15" data-dropcontent="store">
                        <div class="label f-14 pt-5 pb-5">选择区域</div>
                        <div id="gbt2"></div>
                        <div class="label f-14 pt-5 pb-5">选择门店</div>
                        <div id="gbt3"></div>
                        <div class="mt-10" style="height: 29px;">
                            <a href="javascript:;" id="search_2" class="weui-btn weui-btn_mini weui-btn_primary" style="margin-top: 0;">确定</a>
                            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_default cancle-search" style="margin-top: 0;">取消</a>
                        </div>
                    </div>
                    <div class="container-body p-10">
                        <div id="gbt4" class="p-a" style="right: 15px;"></div>
                        <div class="mb-15">
                            <div class="label mb-5">开卡目标</div>
                            <div class="flex flex-between flex-align-center">
                                <div style="line-height: 24px;">
                                    <span class="f-26 a-text" data-key="count1">0</span>
                                    <span class="f-18 p-r" style="top: -2px;">/</span>
                                    <span class="f-20" data-key="total1">0</span>
                                </div>
                                <div data-key="bar1">0%</div>
                            </div>
                            <div id="bar1"></div>
                        </div>
                        <div class="mb-15">
                            <div class="label mb-5">普卡升级银卡</div>
                            <div class="flex flex-between flex-align-center">
                                <div style="line-height: 24px;">
                                    <span class="f-26 a-text" data-key="count2">0</span>
                                    <span class="f-18 p-r" style="top: -2px;">/</span>
                                    <span class="f-20" data-key="total2">0</span>
                                </div>
                                <div data-key="bar2">0%</div>
                            </div>
                            <div id="bar2"></div>
                        </div>
                        <div class="mb-15">
                            <div class="label mb-5">银卡升级金卡</div>
                            <div class="flex flex-between flex-align-center">
                                <div style="line-height: 24px;">
                                    <span class="f-26 a-text" data-key="count3">0</span>
                                    <span class="f-18 p-r" style="top: -2px;">/</span>
                                    <span class="f-20" data-key="total3">0</span>
                                </div>
                                <div data-key="bar3">0%</div>
                            </div>
                            <div id="bar3"></div>
                        </div>
                        <div>
                            <div class="label mb-5">会员等级</div>
                            <div>
                                <div id="chart"></div>
                            </div>
                        </div>
                    </div>
                    <div class="container-body p-10 mb-10">
                        <div class="flex flex-between mb-20">
                            <div class="label">生日人数</div>
                            <div class="f-20 label" data-key="birthday_count">0</div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">生日回访数</div>
                                <div class="value" data-key="birthday_rvisit_count">0</div>
                            </div>
                            <div>
                                <div class="title">生日总消费金额</div>
                                <div class="value">
                                    <i class="iconfont icon-renminbi"></i>
                                    <span data-key="birthday_total">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">生日回访后到店</div>
                                <div class="value" data-key="birthday_rvisit_store_count">0</div>
                            </div>
                            <div>
                                <div class="title">回访到店率</div>
                                <div class="value">
                                    <span data-key="birthday_rvisit_ratio">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 运营指标 -->
                <div id="tab2" class="weui-tab__bd-item">
                    <div class="flex flex-between flex-align-center pt-5 pr-10 pb-5 pl-10" style="background-color: #f7f7f7;border-bottom: 1px solid #e8e8e8;">
                        <div class="f-14">
                            <span data-key="start_date2">0000-00-00</span>至
                            <span data-key="end_date2">0000-00-00</span>
                        </div>
                        <div class="f-14">
                            <span class="drop-search" data-drop="date2">
                                本月
                                <i class="iconfont icon-xiasanjiao txt-n f-14"></i>
                            </span>
                        </div>
                        <div class="f-14">
                            <span class="drop-search" data-drop="store2">
                                正佳广场
                                <i class="iconfont icon-xiasanjiao txt-n f-14"></i>
                            </span>
                        </div>
                    </div>
                    <div class="drop-search-content p-15" data-dropcontent="date2">
                        <div id="gbt5"></div>
                        <div class="mt-5">
                            <input class="weui-input date-sinput" id="date3" type="text">
                            <span class="f-14 ml-5 mr-5">至</span>
                            <input class="weui-input date-sinput" id="date4" type="text">
                        </div>
                        <div class="mt-10" style="height: 29px;">
                            <a href="javascript:;" id="search_3" class="weui-btn weui-btn_mini weui-btn_primary" style="margin-top: 0;">确定</a>
                            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_default cancle-search" style="margin-top: 0;">取消</a>
                        </div>
                    </div>
                    <div class="drop-search-content p-15" data-dropcontent="store2">
                        <div class="label f-14 pt-5 pb-5">选择区域</div>
                        <div id="gbt6"></div>
                        <div class="label f-14 pt-5 pb-5">选择门店</div>
                        <div id="gbt7"></div>
                        <div class="mt-10" style="height: 29px;">
                            <a href="javascript:;" id="search_4" class="weui-btn weui-btn_mini weui-btn_primary" style="margin-top: 0;">确定</a>
                            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_default cancle-search" style="margin-top: 0;">取消</a>
                        </div>
                    </div>
                    <div class="container-body pt-15 pr-10 pb-10 pl-10">
                        <div id="gbt8"></div>
                    </div>
                    <div class="container-body p-10">
                        <div class="pb-10 label">会员等级</div>
                        <div class="flex flex-between mb-5">
                            <div>总金额</div>
                            <div><i class="iconfont icon-renminbi"></i><span data-key="member_level_amount">0</span></div>
                        </div>
                        <div id="table1"></div>
                    </div>
                    <div class="container-body p-10">
                        <div class="pb-10 label">生命周期</div>
                        <div class="flex flex-between  mb-5">
                            <div>总金额</div>
                            <div><i class="iconfont icon-renminbi"></i><span data-key="life_cycle_amount">0</span></div>
                        </div>
                        <div id="table2"></div>
                    </div>
                    <div class="container-body p-10">
                        <div class="pb-10 label">新老会员</div>
                        <div class="flex flex-between mb-5">
                            <div>总金额</div>
                            <div><i class="iconfont icon-renminbi"></i><span data-key="new_old_member_amount">0</span></div>
                        </div>
                        <div id="table3"></div>
                    </div>
                    <div class="container-body p-10 mb-10">
                        <div class="pb-10 label">会员及非会员</div>
                        <div class="flex flex-between mb-5">
                            <div>总金额</div>
                            <div><i class="iconfont icon-renminbi"></i><span data-key="member_unmember_amount">0</span></div>
                        </div>
                        <div id="table4"></div>
                    </div>
                </div>
                <!-- 自定义报表 -->
                <div id="tab3" class="weui-tab__bd-item">
                    <div class="flex flex-justify-center pt-10 pr-10 pl-10">
                        <div class="flex flex-align-center pr-10 pl-10">
                            <div class="f-14 mr-5">纵轴</div>
                            <div class="sw-select" style="width: 120px;">
                                <input id="xaxis" type="text" value="">
                                <div>
                                    <i class="iconfont icon-shangsanjiao"></i>
                                    <i class="iconfont icon-xiasanjiao"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-align-center pr-10 pl-10">
                            <div class="f-14 mr-5">横轴</div>
                            <div class="sw-select" style="width: 120px;">
                                <input id="yaxis" type="text" value="">
                                <div>
                                    <i class="iconfont icon-shangsanjiao"></i>
                                    <i class="iconfont icon-xiasanjiao"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-body p-10 mb-10">
                        <div id="table5"></div>
                    </div>
                </div>
                <!-- 活动分析 -->
                <div id="tab4" class="weui-tab__bd-item">
                    <div class="container-body p-10 mb-10">
                        <div class="flex flex-align-center mb-10">
                            <div class="label" style="width: 70px;">优惠券</div>
                            <div class="sw-select" style="width: 120px;">
                                <input id="coupon" type="text" value="">
                                <div>
                                    <i class="iconfont icon-shangsanjiao"></i>
                                    <i class="iconfont icon-xiasanjiao"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-align-center mb-10">
                            <div class="label" style="width: 70px;">时间</div>
                            <div>
                                <input class="weui-input date-sinput" id="date5" type="text">
                                <span class="f-14 ml-5 mr-5">至</span>
                                <input class="weui-input date-sinput" id="date6" type="text">
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">推送数量</div>
                                <div class="value" data-key="ts_count">0</div>
                            </div>
                            <div>
                                <div class="title">领取数量</div>
                                <div class="value" data-key="lq_count">0</div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">核销数量</div>
                                <div class="value" data-key="hx_count">0</div>
                            </div>
                            <div>
                                <div class="title">核销率</div>
                                <div class="value">
                                    <i class="iconfont icon-renminbi"></i>
                                    <span data-key="hx_ratio">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">券收益占活动比例</div>
                                <div class="value">
                                    <span data-key="qsy_ratio">0%</span>
                                </div>
                            </div>
                            <div class="t-center">
                                <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_primary" style="margin-top: 30px;">未消费会员</a>
                            </div>
                        </div>
                    </div>
                    <div class="container-body p-10 mb-10">
                        <div class="flex flex-align-center mb-10">
                            <div class="label" style="width: 70px;">促销活动</div>
                            <div class="sw-select" style="width: 120px;">
                                <input id="sales" type="text" value="">
                                <div>
                                    <i class="iconfont icon-shangsanjiao"></i>
                                    <i class="iconfont icon-xiasanjiao"></i>
                                </div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">金额</div>
                                <div class="value" data-key="hd_amount">0</div>
                            </div>
                            <div>
                                <div class="title">折扣</div>
                                <div class="value" data-key="hd_sales">0</div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">占比</div>
                                <div class="value">
                                    <span data-key="hd_ratio">0%</span>
                                </div>
                            </div>
                            <div>
                                <div class="title">同比</div>
                                <div class="value">
                                    <span data-key="hd_ratio_t">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">单数</div>
                                <div class="value" data-key="list_count">0</div>
                            </div>
                            <div>
                                <div class="title">单数同比</div>
                                <div class="value">
                                    <span data-key="list_ratio_t">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="t-table">
                            <div>
                                <div class="title">客单价</div>
                                <div class="value">
                                    <i class="iconfont icon-renminbi"></i>
                                    <span data-key="unit_price">0</span>
                                </div>
                            </div>
                            <div>
                                <div class="title">客单价同比</div>
                                <div class="value">
                                    <span data-key="unit_price_ratio_t">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--start:script-->
</body>
<script type="text/javascript" src="./../../../script/jquery-2.1.4.js"></script>
<script type="text/javascript" src="./../../../script/jquery-weui.min.js"></script>
<script type="text/javascript" src="./../../../script/template-web.js"></script>
<script type="text/javascript" src="./../../../script/fastclick.js"></script>
<script type="text/javascript" src="./../../../script/lodash.min.js"></script>
<script type="text/javascript" src="./../../../script/moment.min.js"></script>
<script type="text/javascript" src="./../../../script/crm-base.js"></script>
<!--end:script-->

<script type="text/javascript" src="./../../../script/echarts.simple.min.js"></script>
<script type="text/javascript" src="./../../../script/fixedTable.js"></script>
<script>
    $( function () {
        $('.weui-navbar__item').on('click', function() {
            console.log('weui-navbar__item')
            setTimeout(() => {
                $( ".fixed-table-box" ).fixedTable();
            }, 50);
        })
        var Mock = {
            count1: 134,
            total1: 360,
            bar1: '30%',
            count2: 67,
            total2: 100,
            bar2: '50%',
            count3: 4,
            total3: 30,
            bar3: '80%',
            birthday_count: 365,
            birthday_rvisit_count: 130,
            birthday_total: 22890,
            birthday_rvisit_store_count: 65,
            birthday_rvisit_ratio: '19.6%',
            member_level_amount: 20000,
            life_cycle_amount: 38797,
            new_old_member_amount: 34526,
            member_unmember_amount: 98765,
            ts_count: 100,
            lq_count: 200,
            hx_count: 300,
            hx_ratio: '86.9%',
            qsy_ratio: '36.9%',
            hd_amount: 2983,
            hd_sales: 0.95,
            hd_ratio: '67.9%',
            hd_ratio_t: '87.3%',
            list_count: 9808,
            list_ratio_t: '98.9%',
            unit_price: 2930,
            unit_price_ratio_t: '87.2%',
            member_level: [
                { name: '粉丝', value: 100000 },
                { name: '普卡', value: 350000 },
                { name: '银卡', value: 250000 },
                { name: '金卡', value: 150000 },
                { name: '黑卡', value: 150000 }
            ]
        }
        /* 目标管理 */
        var bar1 = $( '#bar1' ).bar( { height: 10, background: '#eeeeee' } )
        var bar2 = $( '#bar2' ).bar( { height: 10, background: '#eeeeee' } )
        var bar3 = $( '#bar3' ).bar( { height: 10, background: '#eeeeee' } )

        bar1.setValue( Mock.bar1 )
        bar2.setValue( Mock.bar2 )
        bar3.setValue( Mock.bar2 )

        //生成按钮组
        var gbt1 = $( '#gbt1' ).buttonTab( {
            width: 60,
            buttons: [
                { id: 0, text: '本月' },
                { id: 1, text: '上月' },
                { id: 2, text: '前月' }
            ]
        } )
        var gbt2 = $( '#gbt2' ).buttonTab( {
            width: 60,
            buttons: []
        } )
        gbt2.loadData( [
            { id: 0, text: '全部' },
            { id: 1, text: '华南区' },
            { id: 2, text: '华中区' },
            { id: 3, text: '华北区' }
        ] )

        var gbt3 = $( '#gbt3' ).buttonTab( {
            // width: 60,
            buttons: []
        } )
        gbt3.loadData( [
            { id: 0, text: '正佳广场店' },
            { id: 1, text: '体育西店' },
            { id: 2, text: '林和西店' }
        ] )

        var gbt4 = $( '#gbt4' ).buttonTab( {
            width: 50,
            buttons: [
                { id: 0, text: '本月' },
                { id: 1, text: '上月' },
                { id: 2, text: '前月' }
            ],
            onchange: function ( e ) {
                // e is button's id
                console.log( e )
            }
        } ).setValue( 0 )

        $( "#date1" ).calendar( {
            dateFormat: 'yyyy-mm-dd',
            onChange: function ( p, values, displayValues ) {
                console.log( values, displayValues );
            }
        } );
        $( "#date2" ).calendar( {
            dateFormat: 'yyyy-mm-dd',
            onChange: function ( p, values, displayValues ) {
                console.log( values, displayValues );
            }
        } );

        $( '#chart' ).css( {
            width: $( window ).width() - 40,
            height: ( $( window ).width() - 40 ) * 0.67
        } )
        var myChart = echarts.init( document.getElementById( 'chart' ) );
        drawPie( Mock.member_level )

        $( '#search_1' ).on( 'click', function () {
            util.render( {
                start_date1: $( "#date1" ).val(),
                end_date1: $( "#date2" ).val()
            } )
            $( this ).parents( '.drop-search-content' ).hide()
        } )

        $( '#search_2' ).on( 'click', function () {
            //选择区域
            console.log( '选择区域: %s', gbt2.getValue() )
            //选择/*  */门店
            console.log( '选择门店: %s', gbt3.getValue() )
            $( this ).parents( '.drop-search-content' ).hide()
        } )
        //
        util.render( {
            count1: Mock.count1,
            total1: Mock.total1,
            bar1: Mock.bar1,
            count2: Mock.count2,
            total2: Mock.total2,
            bar2: Mock.bar2,
            count3: Mock.count3,
            total3: Mock.total3,
            bar3: Mock.bar3,
            birthday_count: Mock.birthday_count,
            birthday_rvisit_count: Mock.birthday_rvisit_count,
            birthday_total: util.num2Money( Mock.birthday_total ),
            birthday_rvisit_store_count: Mock.birthday_rvisit_store_count,
            birthday_rvisit_ratio: Mock.birthday_rvisit_ratio,
            member_level_amount: util.num2Money(Mock.member_level_amount),
            life_cycle_amount: util.num2Money(Mock.life_cycle_amount),
            new_old_member_amount: util.num2Money(Mock.new_old_member_amount),
            member_unmember_amount: util.num2Money(Mock.member_unmember_amount),
            ts_count: Mock.ts_count,
            lq_count: Mock.lq_count,
            hx_count: Mock.hx_count,
            hx_ratio: Mock.hx_ratio,
            qsy_ratio: Mock.qsy_ratio,
            hd_amount: Mock.hd_amount,
            hd_sales: Mock.hd_sales,
            hd_ratio: Mock.hd_ratio,
            hd_ratio_t: Mock.hd_ratio_t,
            list_count: Mock.list_count,
            list_ratio_t: Mock.list_ratio_t,
            unit_price: Mock.unit_price,
            unit_price_ratio_t: Mock.unit_price_ratio_t,
        } )

        /* 运营指标 */
        //生成按钮组
        var gbt5 = $( '#gbt5' ).buttonTab( {
            width: 60,
            buttons: [
                { id: 0, text: '本月' },
                { id: 1, text: '上月' },
                { id: 2, text: '前月' }
            ]
        } )
        var gbt6 = $( '#gbt6' ).buttonTab( {
            width: 60,
            buttons: []
        } )
        gbt6.loadData( [
            { id: 0, text: '全部' },
            { id: 1, text: '华南区' },
            { id: 2, text: '华中区' },
            { id: 3, text: '华北区' }
        ] )

        var gbt7 = $( '#gbt7' ).buttonTab( {
            // width: 60,
            buttons: []
        } )
        gbt7.loadData( [
            { id: 0, text: '正佳广场店' },
            { id: 1, text: '体育西店' },
            { id: 2, text: '林和西店' }
        ] )

        var gbt8 = $( '#gbt8' ).buttonTab( {
            buttons: [],
            onchange: function ( e ) {
                //模拟表格加载新数据，总金额表格为例
                table1.setData([
                    { filed0: 'test' + e, filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 }
                ])
                
            }
        } )
        gbt8.loadData( [
            { id: 0, text: '全部' },
            { id: 1, text: '00年代' },
            { id: 2, text: '95年代' },
            { id: 3, text: '90年代' },
            { id: 4, text: '85年代' },
            { id: 5, text: '80年代及以上' }
        ] ).setValue(0)
        $( "#date3" ).calendar( {
            dateFormat: 'yyyy-mm-dd',
            onChange: function ( p, values, displayValues ) {
                console.log( values, displayValues );
            }
        } );
        $( "#date4" ).calendar( {
            dateFormat: 'yyyy-mm-dd',
            onChange: function ( p, values, displayValues ) {
                console.log( values, displayValues );
            }
        } );
        $( '#search_3' ).on( 'click', function () {
            util.render( {
                start_date2: $( "#date3" ).val(),
                end_date2: $( "#date4" ).val()
            } )
            $( this ).parents( '.drop-search-content' ).hide()
        } )

        $( '#search_4' ).on( 'click', function () {
            //选择区域
            console.log( '选择区域: %s', gbt6.getValue() )
            //选择/*  */门店
            console.log( '选择门店: %s', gbt7.getValue() )
            $( this ).parents( '.drop-search-content' ).hide()
        } )

        var table1 = $('#table1').swFixedTable({
            cols: [
                { filed: 'filed0', width: 80, title: '' },
                { filed: 'filed1', width: 100, format: function ( v ) { 
                    return '<i class="iconfont icon-renminbi"></i>' + util.num2Money(v) 
                }, title: '金额' },
                { filed: 'filed2', width: 80, format: function ( v ) {
                    return v + '%'
                },title: '占比' },
                { filed: 'filed3', width: 80, title: '单数' },
                { filed: 'filed4', width: 80, format: function ( v ) {
                    return util.num2Money( v )
                },  title: '客单价' },
                { filed: 'filed5', width: 80, title: '客单件' }
            ],
            data: [
                { filed0: '普卡', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '银卡', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '金卡', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '黑卡', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 }
            ]
        })

        $( '#table2' ).swFixedTable( {
            cols: [
                { filed: 'filed0', width: 80, title: '' },
                {
                    filed: 'filed1', width: 100, format: function ( v ) {
                        return '<i class="iconfont icon-renminbi"></i>' + util.num2Money( v )
                    }, title: '金额'
                },
                {
                    filed: 'filed2', width: 80, format: function ( v ) {
                        return v + '%'
                    }, title: '占比'
                },
                { filed: 'filed3', width: 80, title: '单数' },
                {
                    filed: 'filed4', width: 80, format: function ( v ) {
                        return util.num2Money( v )
                    }, title: '客单价'
                },
                { filed: 'filed5', width: 80, title: '客单件' }
            ],
            data: [
                { filed0: '消费会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '忠诚会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '睡眠会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '消费转睡眠', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '忠诚转睡眠', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 }
            ]
        } )

        $( '#table3' ).swFixedTable( {
            cols: [
                { filed: 'filed0', width: 80, title: '' },
                {
                    filed: 'filed1', width: 100, format: function ( v ) {
                        return '<i class="iconfont icon-renminbi"></i>' + util.num2Money( v )
                    }, title: '金额'
                },
                {
                    filed: 'filed2', width: 80, format: function ( v ) {
                        return v + '%'
                    }, title: '占比'
                },
                { filed: 'filed3', width: 80, title: '单数' },
                {
                    filed: 'filed4', width: 80, format: function ( v ) {
                        return util.num2Money( v )
                    }, title: '客单价'
                },
                { filed: 'filed5', width: 80, title: '客单件' }
            ],
            data: [
                { filed0: '新会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '老会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 }
            ]
        } )

        $( '#table4' ).swFixedTable( {
            cols: [
                { filed: 'filed0', width: 80, title: '' },
                {
                    filed: 'filed1', width: 100, format: function ( v ) {
                        return '<i class="iconfont icon-renminbi"></i>' + util.num2Money( v )
                    }, title: '金额'
                },
                {
                    filed: 'filed2', width: 80, format: function ( v ) {
                        return v + '%'
                    }, title: '占比'
                },
                { filed: 'filed3', width: 80, title: '单数' },
                {
                    filed: 'filed4', width: 80, format: function ( v ) {
                        return util.num2Money( v )
                    }, title: '客单价'
                },
                { filed: 'filed5', width: 80, title: '客单件' }
            ],
            data: [
                { filed0: '会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 },
                { filed0: '非会员', filed1: 199999, filed2: '16.0', filed3: 352, filed4: 1999, filed5: 1.2 }
            ]
        } )
        /* 自定义报表 */
        $( "#xaxis" ).select( {
            title: "选择纵轴",
            items: [
                {
                    title: "会员等级",
                    value: 1
                },
                {
                    title: "年代",
                    value: 2
                },
                {
                    title: "生命周期",
                    value: 3
                },
                {
                    title: "新老会员",
                    value: 4
                },
                {
                    title: "会员,非会员",
                    value: 5
                }
            ],
            onChange: function ( d ) {
                console.log( this, d );
            },
            onClose: function ( d ) {
                console.log( 'close' )
            }
        } );
        $( "#yaxis" ).select( {
            title: "选择横轴",
            items: [
                {
                    title: "年代",
                    value: 1
                },
                {
                    title: "会员等级",
                    value: 2
                },
                {
                    title: "生命周期",
                    value: 3
                },
                {
                    title: "新老会员",
                    value: 4
                },
                {
                    title: "会员,非会员",
                    value: 5
                }
            ],
            onChange: function ( d ) {
                console.log( this, d );
            },
            onClose: function ( d ) {
                console.log( 'close' )
            }
        } );
        $( '#table5' ).swFixedTable( {
            cols: [
                { filed: 'filed0', width: 80, title: '占比' },
                {
                    filed: 'filed1', width: 80, format: function ( v ) {
                        return v + '%'
                    }, title: '00年代'
                },
                {
                    filed: 'filed2', width: 80, format: function ( v ) {
                        return v + '%'
                    }, title: '95年代'
                },
                {
                    filed: 'filed3', width: 80, format: function ( v ) {
                        return v + '%'
                    }, title: '90年代'
                },
                {
                    filed: 'filed4', width: 80, format: function ( v ) {
                        return util.num2Money( v )
                    }, title: '85年代'
                },
                {
                    filed: 'filed5', width: 100, format: function ( v ) {
                        return v + '%'
                    }, title: '80年代及以上'
                },
            ],
            data: [
                { filed0: '普卡', filed1: '16.3', filed2: '16.0', filed3: '16.0', filed4: '16.0', filed5: '16.0' },
                { filed0: '银卡', filed1: '16.3', filed2: '16.0', filed3: '16.0', filed4: '16.0', filed5: '16.0' },
                { filed0: '金卡', filed1: '16.3', filed2: '16.0', filed3: '16.0', filed4: '16.0', filed5: '16.0' },
                { filed0: '黑卡', filed1: '16.3', filed2: '16.0', filed3: '16.0', filed4: '16.0', filed5: '16.0' },
                { filed0: '全部', filed1: '16.3', filed2: '16.0', filed3: '16.0', filed4: '16.0', filed5: '16.0' }
            ]
        } )
        /* 活动分析 */
        $( "#coupon" ).select( {
            title: "选择优惠券",
            items: [
                {
                    title: "汇总",
                    value: 1
                },
                {
                    title: "618活动优惠券",
                    value: 2
                },
                {
                    title: "全场8折优惠券",
                    value: 3
                }
            ],
            onChange: function ( d ) {
                console.log( this, d );
            },
            onClose: function ( d ) {
                console.log( 'close' )
            }
        } );
        $( "#sales" ).select( {
            title: "选择促销活动",
            items: [
                {
                    title: "汇总",
                    value: 1
                },
                {
                    title: "年中促销活动",
                    value: 2
                },
                {
                    title: "双11促销",
                    value: 3
                }
            ],
            onChange: function ( d ) {
                console.log( this, d );
            },
            onClose: function ( d ) {
                console.log( 'close' )
            }
        } );
        $( "#date5" ).calendar( {
            dateFormat: 'yyyy-mm-dd',
            onChange: function ( p, values, displayValues ) {
                console.log( values, displayValues );
            }
        } );
        $( "#date6" ).calendar( {
            dateFormat: 'yyyy-mm-dd',
            onChange: function ( p, values, displayValues ) {
                console.log( values, displayValues );
            }
        } );
        function drawPie( pdata ) {
            var data = pdata
            data_name = [];
            for ( var n in data ) {
                data[n].name = data[n].name + ' ' + util.num2Money( data[n].value );
                data_name.push( data[n].name )
            }
            option = {
                tooltip: {
                    show: false
                },
                color: ['#ffcc01', '#24a4ff', '#b246e0', '#6fce6e', '#ef534f'],
                legend: {
                    orient: 'vertical',
                    top: 'center',
                    right: 0,
                    data: data_name,
                    textStyle: {
                        color: "#333",
                        fontWeight: 'normal',
                        fontFamily: 'PingFang SC'
                    }
                },
                series: [
                    {
                        name: '',
                        type: 'pie',
                        center: ['32%', '50%'],
                        radius: ['50%', '85%'],
                        avoidLabelOverlap: false,
                        hoverAnimation: false,
                        animation: false,
                        label: {
                            normal: {
                                show: true,
                                position: 'inner',
                                formatter: function ( params ) {
                                    //params.percent
                                    if ( params.percent < 10 ) {
                                        return '';
                                    } else {
                                        return params.percent.toFixed( 1 ) + '%'
                                    }
                                },
                                textStyle: {
                                    fontSize: '12'
                                }
                            },
                            emphasis: {
                                show: true,
                                position: 'inside',
                                formatter: function ( params ) {
                                    //params.percent
                                    if ( params.percent < 10 ) {
                                        return '';
                                    } else {
                                        return params.percent.toFixed( 1 ) + '%'
                                    }
                                },
                                textStyle: {
                                    fontSize: '12'
                                }
                            }
                        },
                        labelLine: {
                            normal: {
                                show: false
                            }
                        },
                        data: data
                    }
                ]
            };

            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption( option );
            //
        }
    } )
</script>
<!--start:footer-->
</html>
<!--end:footer-->