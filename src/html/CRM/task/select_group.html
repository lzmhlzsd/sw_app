<!--start:header-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="./../../../css/weui.min.css">
    <link rel="stylesheet" type="text/css" href="./../../../css/jquery-weui.min.css">
    <link rel="stylesheet" type="text/css" href="./../../../css/crm-base.css">
    <link rel="stylesheet" type="text/css" href="./../../../css/fonts/iconfont.css">
    <title>选择分组</title>
</head>

<body>
<!--end:header-->

    <style>
        .weui-cell_swiped .weui-cell__bd {
            border-radius: 5px;
        }

        .weui-swiped-btn {
            margin-left: 5px;
            border-radius: 5px;
        }
    </style>

    <div id="group-list" class="p-10">
    </div>
    <script id="tp-group" type="text/html">
        {{each list as m index}}
        <label class="weui-check__label">
            <div class="weui-cell weui-cell_swiped mb-5 weui-cells_checkbox">
                <div class="weui-cell__bd g-item" data-id="{{m.id}}" data-index="{{index}}">
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <p>{{m.name}}</p>
                        </div>
                        <div class="weui-cell__ft">
                            <span class="txt-d">{{m.count}}</span>
                            {{if m.checked }}
                            <input type="checkbox" name="radio_{{index}}" value="0" class="weui-check" checked="checked">
                            {{else}}
                            <input type="checkbox" name="radio_{{index}}" value="0" class="weui-check">
                            {{/if}}
                            <i class="weui-icon-checked"></i>
                        </div>
                    </div>
                </div>
            </div>
        </label>
        {{/each}}
    </script>
    <!--start:script-->
</body>
<script type="text/javascript" src="./../../../script/jquery-2.1.4.js"></script>
<script type="text/javascript" src="./../../../script/jquery-weui.min.js"></script>
<script type="text/javascript" src="./../../../script/template-web.js"></script>
<script type="text/javascript" src="./../../../script/fastclick.js"></script>
<script type="text/javascript" src="./../../../script/lodash.min.js"></script>
<script type="text/javascript" src="./../../../script/moment.min.js"></script>
<script type="text/javascript" src="./../../../script/crm-base.js"></script>
<!--end:script-->

<script>
    var Mock = {
        list: [
            { id: 1, name: '全部会员', count: 13673, checked: false },
            { id: 2, name: '普卡', count: 13673, checked: false },
            { id: 3, name: '银卡', count: 13673, checked: false },
            { id: 4, name: '金卡', count: 13673, checked: true },
            { id: 5, name: '黑卡', count: 13673, checked: false },
            { id: 6, name: '注册会员', count: 13673, checked: false },
            { id: 7, name: '消费会员', count: 13673, checked: false },
            { id: 8, name: '忠诚会员', count: 13673, checked: true },
            { id: 9, name: '睡眠会员', count: 13673, checked: false },
            { id: 10, name: '注册会员转变为睡眠会员', count: 13673, checked: false },
            { id: 11, name: '消费会员转变为睡眠会员', count: 13673, checked: false },
            { id: 12, name: '忠诚会员转变为睡眠会员', count: 13673, checked: false },
            { id: 13, name: '新会员', count: 13673, checked: false },
            { id: 14, name: '老会员', count: 13673, checked: false },
            { id: 15, name: '本月生日会员', count: 13673, checked: false },
            { id: 16, name: '当日生日会员', count: 13673, checked: false },
            { id: 17, name: '普卡升银卡', count: 13673, checked: false },
            { id: 18, name: '银卡升金卡', count: 13673, checked: false },
            { id: 19, name: '新贵族(首单5000以上)', count: 13673, checked: false }
        ]
    }

    util.templateRender( 'tp-group', {
        list: Mock.list
    }, $( '#group-list' ) )


    $( '.g-item' ).on( 'click', function () {
        var index = $( this ).data( 'index' )
        console.log( 'g-item, index: %s, checked: %s', index, $(this).find('[name="radio_' + index + '"]').prop('checked') )
        Mock.list[index].checked = $( this ).find( '[name="radio_' + index + '"]' ).prop( 'checked' )
        
    } )

    // 获取Mock checked = true
    // console.log(_.filter( Mock.list, { 'checked': true } ))
</script>

<!--start:footer-->
</html>
<!--end:footer-->